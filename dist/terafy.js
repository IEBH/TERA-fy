var ar=typeof global=="object"&&global&&global.Object===Object&&global,K=ar;var fr=typeof self=="object"&&self&&self.Object===Object&&self,sr=K||fr||Function("return this")(),i=sr;var ir=i.Symbol,h=ir;var Tt=Object.prototype,nr=Tt.hasOwnProperty,pr=Tt.toString,k=h?h.toStringTag:void 0;function mr(t){var e=nr.call(t,k),r=t[k];try{t[k]=void 0;var o=!0}catch{}var n=pr.call(t);return o&&(e?t[k]=r:delete t[k]),n}var At=mr;var lr=Object.prototype,ur=lr.toString;function dr(t){return ur.call(t)}var Ot=dr;var cr="[object Null]",xr="[object Undefined]",_t=h?h.toStringTag:void 0;function hr(t){return t==null?t===void 0?xr:cr:_t&&_t in Object(t)?At(t):Ot(t)}var g=hr;function gr(t){return t!=null&&typeof t=="object"}var c=gr;var yr=Array.isArray,C=yr;function br(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var x=br;var vr="[object AsyncFunction]",jr="[object Function]",wr="[object GeneratorFunction]",Tr="[object Proxy]";function Ar(t){if(!x(t))return!1;var e=g(t);return e==jr||e==wr||e==vr||e==Tr}var V=Ar;var Or=i["__core-js_shared__"],q=Or;var Pt=function(){var t=/[^.]+$/.exec(q&&q.keys&&q.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function _r(t){return!!Pt&&Pt in t}var St=_r;var Pr=Function.prototype,Sr=Pr.toString;function Ir(t){if(t!=null){try{return Sr.call(t)}catch{}try{return t+""}catch{}}return""}var y=Ir;var Cr=/[\\^$.*+?()[\]{}|]/g,Er=/^\[object .+?Constructor\]$/,Mr=Function.prototype,Lr=Object.prototype,Rr=Mr.toString,Br=Lr.hasOwnProperty,Fr=RegExp("^"+Rr.call(Br).replace(Cr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Dr(t){if(!x(t)||St(t))return!1;var e=V(t)?Fr:Er;return e.test(y(t))}var It=Dr;function Nr(t,e){return t?.[e]}var Ct=Nr;function Ur(t,e){var r=Ct(t,e);return It(r)?r:void 0}var l=Ur;var Wr=l(i,"WeakMap"),H=Wr;var Et=Object.create,Gr=function(){function t(){}return function(e){if(!x(e))return{};if(Et)return Et(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}(),Mt=Gr;function kr(t,e){var r=-1,o=t.length;for(e||(e=Array(o));++r<o;)e[r]=t[r];return e}var Lt=kr;var zr=function(){try{var t=l(Object,"defineProperty");return t({},"",{}),t}catch{}}(),lt=zr;function Kr(t,e){for(var r=-1,o=t==null?0:t.length;++r<o&&e(t[r],r,t)!==!1;);return t}var Rt=Kr;var Vr=9007199254740991,qr=/^(?:0|[1-9]\d*)$/;function Hr(t,e){var r=typeof t;return e=e??Vr,!!e&&(r=="number"||r!="symbol"&&qr.test(t))&&t>-1&&t%1==0&&t<e}var Bt=Hr;function $r(t,e,r){e=="__proto__"&&lt?lt(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}var $=$r;function Yr(t,e){return t===e||t!==t&&e!==e}var Y=Yr;var Jr=Object.prototype,Xr=Jr.hasOwnProperty;function Zr(t,e,r){var o=t[e];(!(Xr.call(t,e)&&Y(o,r))||r===void 0&&!(e in t))&&$(t,e,r)}var J=Zr;function Qr(t,e,r,o){var n=!r;r||(r={});for(var p=-1,s=e.length;++p<s;){var m=e[p],u=o?o(r[m],t[m],m,r,t):void 0;u===void 0&&(u=t[m]),n?$(r,m,u):J(r,m,u)}return r}var w=Qr;var to=9007199254740991;function eo(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=to}var X=eo;function ro(t){return t!=null&&X(t.length)&&!V(t)}var Z=ro;var oo=Object.prototype;function ao(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||oo;return t===r}var E=ao;function fo(t,e){for(var r=-1,o=Array(t);++r<t;)o[r]=e(r);return o}var Ft=fo;var so="[object Arguments]";function io(t){return c(t)&&g(t)==so}var ut=io;var Dt=Object.prototype,no=Dt.hasOwnProperty,po=Dt.propertyIsEnumerable,mo=ut(function(){return arguments}())?ut:function(t){return c(t)&&no.call(t,"callee")&&!po.call(t,"callee")},Nt=mo;function lo(){return!1}var Ut=lo;var kt=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Wt=kt&&typeof module=="object"&&module&&!module.nodeType&&module,uo=Wt&&Wt.exports===kt,Gt=uo?i.Buffer:void 0,co=Gt?Gt.isBuffer:void 0,xo=co||Ut,Q=xo;var ho="[object Arguments]",go="[object Array]",yo="[object Boolean]",bo="[object Date]",vo="[object Error]",jo="[object Function]",wo="[object Map]",To="[object Number]",Ao="[object Object]",Oo="[object RegExp]",_o="[object Set]",Po="[object String]",So="[object WeakMap]",Io="[object ArrayBuffer]",Co="[object DataView]",Eo="[object Float32Array]",Mo="[object Float64Array]",Lo="[object Int8Array]",Ro="[object Int16Array]",Bo="[object Int32Array]",Fo="[object Uint8Array]",Do="[object Uint8ClampedArray]",No="[object Uint16Array]",Uo="[object Uint32Array]",f={};f[Eo]=f[Mo]=f[Lo]=f[Ro]=f[Bo]=f[Fo]=f[Do]=f[No]=f[Uo]=!0;f[ho]=f[go]=f[Io]=f[yo]=f[Co]=f[bo]=f[vo]=f[jo]=f[wo]=f[To]=f[Ao]=f[Oo]=f[_o]=f[Po]=f[So]=!1;function Wo(t){return c(t)&&X(t.length)&&!!f[g(t)]}var zt=Wo;function Go(t){return function(e){return t(e)}}var M=Go;var Kt=typeof exports=="object"&&exports&&!exports.nodeType&&exports,z=Kt&&typeof module=="object"&&module&&!module.nodeType&&module,ko=z&&z.exports===Kt,dt=ko&&K.process,zo=function(){try{var t=z&&z.require&&z.require("util").types;return t||dt&&dt.binding&&dt.binding("util")}catch{}}(),b=zo;var Vt=b&&b.isTypedArray,Ko=Vt?M(Vt):zt,qt=Ko;var Vo=Object.prototype,qo=Vo.hasOwnProperty;function Ho(t,e){var r=C(t),o=!r&&Nt(t),n=!r&&!o&&Q(t),p=!r&&!o&&!n&&qt(t),s=r||o||n||p,m=s?Ft(t.length,String):[],u=m.length;for(var d in t)(e||qo.call(t,d))&&!(s&&(d=="length"||n&&(d=="offset"||d=="parent")||p&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||Bt(d,u)))&&m.push(d);return m}var tt=Ho;function $o(t,e){return function(r){return t(e(r))}}var et=$o;var Yo=et(Object.keys,Object),Ht=Yo;var Jo=Object.prototype,Xo=Jo.hasOwnProperty;function Zo(t){if(!E(t))return Ht(t);var e=[];for(var r in Object(t))Xo.call(t,r)&&r!="constructor"&&e.push(r);return e}var $t=Zo;function Qo(t){return Z(t)?tt(t):$t(t)}var L=Qo;function ta(t){var e=[];if(t!=null)for(var r in Object(t))e.push(r);return e}var Yt=ta;var ea=Object.prototype,ra=ea.hasOwnProperty;function oa(t){if(!x(t))return Yt(t);var e=E(t),r=[];for(var o in t)o=="constructor"&&(e||!ra.call(t,o))||r.push(o);return r}var Jt=oa;function aa(t){return Z(t)?tt(t,!0):Jt(t)}var R=aa;var fa=l(Object,"create"),v=fa;function sa(){this.__data__=v?v(null):{},this.size=0}var Xt=sa;function ia(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var Zt=ia;var na="__lodash_hash_undefined__",pa=Object.prototype,ma=pa.hasOwnProperty;function la(t){var e=this.__data__;if(v){var r=e[t];return r===na?void 0:r}return ma.call(e,t)?e[t]:void 0}var Qt=la;var ua=Object.prototype,da=ua.hasOwnProperty;function ca(t){var e=this.__data__;return v?e[t]!==void 0:da.call(e,t)}var te=ca;var xa="__lodash_hash_undefined__";function ha(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=v&&e===void 0?xa:e,this}var ee=ha;function B(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var o=t[e];this.set(o[0],o[1])}}B.prototype.clear=Xt;B.prototype.delete=Zt;B.prototype.get=Qt;B.prototype.has=te;B.prototype.set=ee;var ct=B;function ga(){this.__data__=[],this.size=0}var re=ga;function ya(t,e){for(var r=t.length;r--;)if(Y(t[r][0],e))return r;return-1}var T=ya;var ba=Array.prototype,va=ba.splice;function ja(t){var e=this.__data__,r=T(e,t);if(r<0)return!1;var o=e.length-1;return r==o?e.pop():va.call(e,r,1),--this.size,!0}var oe=ja;function wa(t){var e=this.__data__,r=T(e,t);return r<0?void 0:e[r][1]}var ae=wa;function Ta(t){return T(this.__data__,t)>-1}var fe=Ta;function Aa(t,e){var r=this.__data__,o=T(r,t);return o<0?(++this.size,r.push([t,e])):r[o][1]=e,this}var se=Aa;function F(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var o=t[e];this.set(o[0],o[1])}}F.prototype.clear=re;F.prototype.delete=oe;F.prototype.get=ae;F.prototype.has=fe;F.prototype.set=se;var A=F;var Oa=l(i,"Map"),O=Oa;function _a(){this.size=0,this.__data__={hash:new ct,map:new(O||A),string:new ct}}var ie=_a;function Pa(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var ne=Pa;function Sa(t,e){var r=t.__data__;return ne(e)?r[typeof e=="string"?"string":"hash"]:r.map}var _=Sa;function Ia(t){var e=_(this,t).delete(t);return this.size-=e?1:0,e}var pe=Ia;function Ca(t){return _(this,t).get(t)}var me=Ca;function Ea(t){return _(this,t).has(t)}var le=Ea;function Ma(t,e){var r=_(this,t),o=r.size;return r.set(t,e),this.size+=r.size==o?0:1,this}var ue=Ma;function D(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var o=t[e];this.set(o[0],o[1])}}D.prototype.clear=ie;D.prototype.delete=pe;D.prototype.get=me;D.prototype.has=le;D.prototype.set=ue;var de=D;function La(t,e){for(var r=-1,o=e.length,n=t.length;++r<o;)t[n+r]=e[r];return t}var rt=La;var Ra=et(Object.getPrototypeOf,Object),ot=Ra;function Ba(){this.__data__=new A,this.size=0}var ce=Ba;function Fa(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}var xe=Fa;function Da(t){return this.__data__.get(t)}var he=Da;function Na(t){return this.__data__.has(t)}var ge=Na;var Ua=200;function Wa(t,e){var r=this.__data__;if(r instanceof A){var o=r.__data__;if(!O||o.length<Ua-1)return o.push([t,e]),this.size=++r.size,this;r=this.__data__=new de(o)}return r.set(t,e),this.size=r.size,this}var ye=Wa;function N(t){var e=this.__data__=new A(t);this.size=e.size}N.prototype.clear=ce;N.prototype.delete=xe;N.prototype.get=he;N.prototype.has=ge;N.prototype.set=ye;var be=N;function Ga(t,e){return t&&w(e,L(e),t)}var ve=Ga;function ka(t,e){return t&&w(e,R(e),t)}var je=ka;var Oe=typeof exports=="object"&&exports&&!exports.nodeType&&exports,we=Oe&&typeof module=="object"&&module&&!module.nodeType&&module,za=we&&we.exports===Oe,Te=za?i.Buffer:void 0,Ae=Te?Te.allocUnsafe:void 0;function Ka(t,e){if(e)return t.slice();var r=t.length,o=Ae?Ae(r):new t.constructor(r);return t.copy(o),o}var _e=Ka;function Va(t,e){for(var r=-1,o=t==null?0:t.length,n=0,p=[];++r<o;){var s=t[r];e(s,r,t)&&(p[n++]=s)}return p}var Pe=Va;function qa(){return[]}var at=qa;var Ha=Object.prototype,$a=Ha.propertyIsEnumerable,Se=Object.getOwnPropertySymbols,Ya=Se?function(t){return t==null?[]:(t=Object(t),Pe(Se(t),function(e){return $a.call(t,e)}))}:at,U=Ya;function Ja(t,e){return w(t,U(t),e)}var Ie=Ja;var Xa=Object.getOwnPropertySymbols,Za=Xa?function(t){for(var e=[];t;)rt(e,U(t)),t=ot(t);return e}:at,ft=Za;function Qa(t,e){return w(t,ft(t),e)}var Ce=Qa;function tf(t,e,r){var o=e(t);return C(t)?o:rt(o,r(t))}var st=tf;function ef(t){return st(t,L,U)}var Ee=ef;function rf(t){return st(t,R,ft)}var Me=rf;var of=l(i,"DataView"),it=of;var af=l(i,"Promise"),nt=af;var ff=l(i,"Set"),pt=ff;var Le="[object Map]",sf="[object Object]",Re="[object Promise]",Be="[object Set]",Fe="[object WeakMap]",De="[object DataView]",nf=y(it),pf=y(O),mf=y(nt),lf=y(pt),uf=y(H),S=g;(it&&S(new it(new ArrayBuffer(1)))!=De||O&&S(new O)!=Le||nt&&S(nt.resolve())!=Re||pt&&S(new pt)!=Be||H&&S(new H)!=Fe)&&(S=function(t){var e=g(t),r=e==sf?t.constructor:void 0,o=r?y(r):"";if(o)switch(o){case nf:return De;case pf:return Le;case mf:return Re;case lf:return Be;case uf:return Fe}return e});var W=S;var df=Object.prototype,cf=df.hasOwnProperty;function xf(t){var e=t.length,r=new t.constructor(e);return e&&typeof t[0]=="string"&&cf.call(t,"index")&&(r.index=t.index,r.input=t.input),r}var Ne=xf;var hf=i.Uint8Array,xt=hf;function gf(t){var e=new t.constructor(t.byteLength);return new xt(e).set(new xt(t)),e}var G=gf;function yf(t,e){var r=e?G(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}var Ue=yf;var bf=/\w*$/;function vf(t){var e=new t.constructor(t.source,bf.exec(t));return e.lastIndex=t.lastIndex,e}var We=vf;var Ge=h?h.prototype:void 0,ke=Ge?Ge.valueOf:void 0;function jf(t){return ke?Object(ke.call(t)):{}}var ze=jf;function wf(t,e){var r=e?G(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}var Ke=wf;var Tf="[object Boolean]",Af="[object Date]",Of="[object Map]",_f="[object Number]",Pf="[object RegExp]",Sf="[object Set]",If="[object String]",Cf="[object Symbol]",Ef="[object ArrayBuffer]",Mf="[object DataView]",Lf="[object Float32Array]",Rf="[object Float64Array]",Bf="[object Int8Array]",Ff="[object Int16Array]",Df="[object Int32Array]",Nf="[object Uint8Array]",Uf="[object Uint8ClampedArray]",Wf="[object Uint16Array]",Gf="[object Uint32Array]";function kf(t,e,r){var o=t.constructor;switch(e){case Ef:return G(t);case Tf:case Af:return new o(+t);case Mf:return Ue(t,r);case Lf:case Rf:case Bf:case Ff:case Df:case Nf:case Uf:case Wf:case Gf:return Ke(t,r);case Of:return new o;case _f:case If:return new o(t);case Pf:return We(t);case Sf:return new o;case Cf:return ze(t)}}var Ve=kf;function zf(t){return typeof t.constructor=="function"&&!E(t)?Mt(ot(t)):{}}var qe=zf;var Kf="[object Map]";function Vf(t){return c(t)&&W(t)==Kf}var He=Vf;var $e=b&&b.isMap,qf=$e?M($e):He,Ye=qf;var Hf="[object Set]";function $f(t){return c(t)&&W(t)==Hf}var Je=$f;var Xe=b&&b.isSet,Yf=Xe?M(Xe):Je,Ze=Yf;var Jf=1,Xf=2,Zf=4,Qe="[object Arguments]",Qf="[object Array]",ts="[object Boolean]",es="[object Date]",rs="[object Error]",tr="[object Function]",os="[object GeneratorFunction]",as="[object Map]",fs="[object Number]",er="[object Object]",ss="[object RegExp]",is="[object Set]",ns="[object String]",ps="[object Symbol]",ms="[object WeakMap]",ls="[object ArrayBuffer]",us="[object DataView]",ds="[object Float32Array]",cs="[object Float64Array]",xs="[object Int8Array]",hs="[object Int16Array]",gs="[object Int32Array]",ys="[object Uint8Array]",bs="[object Uint8ClampedArray]",vs="[object Uint16Array]",js="[object Uint32Array]",a={};a[Qe]=a[Qf]=a[ls]=a[us]=a[ts]=a[es]=a[ds]=a[cs]=a[xs]=a[hs]=a[gs]=a[as]=a[fs]=a[er]=a[ss]=a[is]=a[ns]=a[ps]=a[ys]=a[bs]=a[vs]=a[js]=!0;a[rs]=a[tr]=a[ms]=!1;function mt(t,e,r,o,n,p){var s,m=e&Jf,u=e&Xf,d=e&Zf;if(r&&(s=n?r(t,o,n,p):r(t)),s!==void 0)return s;if(!x(t))return t;var bt=C(t);if(bt){if(s=Ne(t),!m)return Lt(t,s)}else{var I=W(t),vt=I==tr||I==os;if(Q(t))return _e(t,m);if(I==er||I==Qe||vt&&!n){if(s=u||vt?{}:qe(t),!m)return u?Ce(t,je(s,t)):Ie(t,ve(s,t))}else{if(!a[I])return n?t:{};s=Ve(t,I,m)}}p||(p=new be);var jt=p.get(t);if(jt)return jt;p.set(t,s),Ze(t)?t.forEach(function(j){s.add(mt(j,e,r,j,t,p))}):Ye(t)&&t.forEach(function(j,P){s.set(P,mt(j,e,r,P,t,p))});var or=d?u?Me:Ee:u?R:L,wt=bt?void 0:or(t);return Rt(wt||t,function(j,P){wt&&(P=j,j=t[P]),J(s,P,mt(j,e,r,P,t,p))}),s}var rr=mt;var ws=1,Ts=4;function As(t){return rr(t,ws|Ts)}var ht=As;var gt=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((e,r)=>(r&=63,r<36?e+=r.toString(36):r<62?e+=(r-26).toString(36).toUpperCase():r>62?e+="-":e+="_",e),"");var yt=class{settings={devMode:!0,mode:"detect",modeTimeout:300,siteUrl:"https://tera-tools.com/embed",restrictOrigin:"*"};dom={el:null,iframe:null,stylesheet:null};methods=["handshake","getUser","bindProject","getProject","getProjects","setActiveProject","requireProject","selectProject","getProjectState","applyProjectStatePatch","subscrtibeProjectState","getProjectFiles","getProjectLibrary","setProjectLibrary"];plugins=[];send(e){let r=gt();return this.acceptPostboxes[r]={},this.acceptPostboxes[r].promise=new Promise((o,n)=>{Object.assign(this.acceptPostboxes[r],{resolve:o,reject:n}),this.sendRaw({id:r,...e})}),this.acceptPostboxes[r].promise}sendRaw(e){let r;try{if(r={TERA:1,id:e.id||gt(),...ht(e)},this.settings.mode=="parent")window.parent.postMessage(r,this.settings.restrictOrigin);else if(this.settings.mode=="child")this.dom.iframe.contentWindow.postMessage(r,this.settings.restrictOrigin);else throw this.settings.mode=="detect"?new Error("Call init() or detectMode() before trying to send data to determine the mode"):new Error(`Unknown TERA communication mode "${this.settings.mode}"`)}catch(o){throw this.debug("ERROR","Message compose client->server:",o),this.debug("ERROR","Attempted to dispatch payload client->server",r),o}}rpc(e,...r){return this.send({action:"rpc",method:e,args:r})}acceptMessage(e){if(e.origin==window.location.origin)return;let r=e.data;if(!(!r.TERA||!r.id))if(this.debug("Recieved",r),r?.action=="response"&&this.acceptPostboxes[r.id])r.isError===!0?this.acceptPostboxes[r.id].reject(r.response):this.acceptPostboxes[r.id].resolve(r.response);else{if(r?.action=="rpc")return Promise.resolve().then(()=>this[r.method].apply(this,r.args)).then(o=>this.sendRaw({id:r.id,action:"response",response:o})).catch(o=>{console.warn(`TERA-FY client threw on RPC:${r.method}:`,o),this.sendRaw({id:r.id,action:"response",isError:!0,response:o.toString()})});r?.id?this.debug(`Ignoring message ID ${r.id} - was meant for someone else?`):this.debug("Unexpected incoming TERA-FY CLIENT message",{message:r})}}acceptPostboxes={};applyProjectStatePatchLocal(e){return this.debug("WARN","Accepted project patch",e,"but applyProjectStatePatchLocal() has not been sub-classed"),Promise.resolve()}constructor(e){e&&this.set(e)}init(){return this.init.promise?this.init.promise:(window.addEventListener("message",this.acceptMessage.bind(this)),this.init.promise=Promise.resolve().then(()=>this.detectMode()).then(e=>this.settings.mode=e).then(()=>Promise.all([this.injectComms(),this.injectStylesheet(),this.injectMethods(),...this.plugins.map(e=>e.init())])))}detectMode(){return this.settings.mode!="detect"?this.settings.mode:window.self===window.parent?"child":Promise.resolve().then(()=>this.settings.mode="parent").then(()=>new Promise((e,r)=>{let o=setTimeout(()=>r(),this.settings.modeTimeout);this.rpc("handshake").then(()=>clearTimeout(o)).then(()=>e())})).then(()=>"parent").catch(()=>"child")}injectComms(){return new Promise(e=>{switch(this.settings.mode){case"child":this.dom.el=document.createElement("div"),this.dom.el.id="tera-fy",this.dom.el.classList.toggle("dev-mode",this.settings.devMode),document.body.append(this.dom.el),this.dom.iframe=document.createElement("iframe"),this.dom.iframe.setAttribute("sandbox","allow-downloads allow-scripts allow-same-origin"),this.dom.iframe.addEventListener("load",()=>{this.debug("Embed frame ready"),e()}),this.dom.iframe.src=this.settings.siteUrl,this.dom.el.append(this.dom.iframe);break;case"parent":e();break;default:throw new Error(`Unsupported mode "${this.settings.mode}" when calling injectComms()`)}})}injectStylesheet(){switch(this.settings.mode){case"child":this.dom.stylesheet=document.createElement("style"),this.dom.stylesheet.innerHTML=[":root {","--TERA-accent: #4d659c;","}","#tera-fy {","display: none;","position: fixed;","right: 50px;","bottom: 50px;","width: 300px;","height: 150px;","background: transparent;","&.dev-mode {","display: flex;","border: 5px solid var(--TERA-accent);","background: #FFF;","}","& > iframe {","width: 100%;","height: 100%;","}","}","body.tera-fy-focus {","overflow: hidden;","& #tera-fy {","display: flex !important;","position: fixed !important;","top: 0px !important;","width: 100vw !important;","height: 100vh !important;","left: 0px !important;","z-index: 10000 !important;","}","}"].join(`
`),document.head.appendChild(this.dom.stylesheet);break;case"parent":break;default:throw new Error(`Unsupported mode "${this.settings.mode}" when injectStylesheet()`)}}injectMethods(){this.methods.forEach(e=>this[e]=this.rpc.bind(this,e))}debug(...e){let r="log";typeof e[0]=="string"&&["INFO","LOG","WARN","ERROR"].includes(e[0])&&(r=e.shift().toLowerCase()),!(["INFO","LOG"].includes(r)&&!this.settings.devMode)&&console[r]("%c[TERA-FY CLIENT]","font-weight: bold; color: #ff5722;",...e)}set(e,r){return typeof e=="string"?this.settings[e]=r:Object.assign(this.settings,e),this.toggleDevMode(this.settings.devMode)}use(e,r){if(typeof e!="function")throw new Error("Expected use() call to be provided with a class initalizer");let o=new e(this,r);return this.mixin(this,o),this.plugins.push(o),this}mixin(e,r){Object.getOwnPropertyNames(Object.getPrototypeOf(r)).filter(o=>!["constructor","prototype","name"].includes(o)).forEach(o=>{Object.defineProperty(e,o,{value:r[o].bind(e),enumerable:!1})})}toggleDevMode(e="toggle"){return this.settings.devMode=e==="toggle"?!this.settings.devMode:e,this.dom.el&&this.dom.el.classList.toggle("dev-mode",this.settings.devMode),this}toggleFocus(e="toggle"){this.debug("Request focus",{isFocused:e}),globalThis.document.body.classList.toggle("tera-fy-focus",e==="toggle"?void 0:e)}handshake(){}getUser(){}getProject(){}getProjects(){}setActiveProject(){}requireProject(){}selectProject(){}getProjectState(){}applyProjectStatePatch(){}subscribeProjectState(){}getProjectFiles(){}getProjectLibrary(){}setProjectLibrary(){}};export{yt as default};
/*! Bundled license information:

lodash-es/lodash.js:
  (**
   * @license
   * Lodash (Custom Build) <https://lodash.com/>
   * Build: `lodash modularize exports="es" -o ./`
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)
*/
//# sourceMappingURL=terafy.js.map
