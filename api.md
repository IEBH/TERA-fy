<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### Table of Contents

*   [ProjectFile][1]
    *   [tera][2]
        *   [Parameters][3]
    *   [id][4]
    *   [name][5]
    *   [path][6]
    *   [parsedName][7]
        *   [Properties][8]
    *   [created][9]
    *   [createdFormatted][10]
    *   [modified][11]
    *   [modifiedFormatted][12]
    *   [accessed][13]
    *   [accessedFormatted][14]
    *   [size][15]
    *   [sizeFormatted][16]
    *   [mime][17]
    *   [getContents][18]
    *   [setContents][19]
        *   [Parameters][20]
    *   [getRefs][21]
    *   [setRefs][22]
        *   [Parameters][23]
*   [TeraFy][24]
    *   [settings][25]
        *   [Properties][26]
    *   [events][27]
    *   [dom][28]
        *   [Properties][29]
    *   [methods][30]
    *   [plugins][31]
    *   [send][32]
        *   [Parameters][33]
    *   [sendRaw][34]
        *   [Parameters][35]
    *   [rpc][36]
        *   [Parameters][37]
    *   [acceptMessage][38]
        *   [Parameters][39]
    *   [acceptPostboxes][40]
    *   [createProjectStatePatch][41]
        *   [Parameters][42]
    *   [applyProjectStatePatchLocal][43]
        *   [Parameters][44]
    *   [init][45]
        *   [Parameters][46]
    *   [detectMode][47]
    *   [injectComms][48]
    *   [injectStylesheet][49]
    *   [injectMethods][50]
    *   [debug][51]
        *   [Parameters][52]
    *   [set][53]
        *   [Parameters][54]
    *   [setIfDev][55]
        *   [Parameters][56]
    *   [use][57]
        *   [Parameters][58]
    *   [mixin][59]
        *   [Parameters][60]
    *   [toggleDevMode][61]
        *   [Parameters][62]
    *   [toggleFocus][63]
        *   [Parameters][64]
    *   [selectProjectFile][65]
        *   [Parameters][66]
    *   [getProjectFiles][67]
        *   [Parameters][68]
    *   [getProjectFile][69]
        *   [Parameters][70]
*   [handshake][71]
    *   [Properties][72]
*   [User][73]
    *   [Properties][74]
*   [getUser][75]
*   [requireUser][76]
    *   [Parameters][77]
*   [Project][78]
*   [getProject][79]
*   [getProjects][80]
*   [setActiveProject][81]
    *   [Parameters][82]
*   [requireProject][83]
    *   [Parameters][84]
*   [selectProject][85]
    *   [Parameters][86]
*   [getProjectState][87]
    *   [Parameters][88]
*   [setProjectState][89]
    *   [Parameters][90]
*   [setProjectStateDefaults][91]
    *   [Parameters][92]
*   [saveProjectState][93]
*   [replaceProjectState][94]
    *   [Parameters][95]
*   [applyProjectStatePatch][96]
    *   [Parameters][97]
*   [subscribeProjectState][98]
*   [FileFilters][99]
    *   [Properties][100]
*   [selectProjectFile][101]
    *   [Parameters][102]
*   [setProjectFile][103]
    *   [Parameters][104]
*   [selectProjectLibrary][105]
    *   [Parameters][106]
*   [parseProjectLibrary][107]
    *   [Parameters][108]
*   [setProjectLibrary][109]
    *   [Parameters][110]
*   [setProjectLibrary][111]
    *   [Parameters][112]
*   [uiAlert][113]
    *   [Parameters][114]
*   [uiSplat][115]
    *   [Parameters][116]
*   [uiWindow][117]
    *   [Parameters][118]

## ProjectFile

A project file fetched from TERA

### tera

Parent TeraClient instance used by all helper functions

#### Parameters

*   `TeraClient` &#x20;

### id

A UUID string representing the unique ID of the file

Type: [String][119]

### name

Relative name path (can contain prefix directories) for the human readable file name

Type: [String][119]

### path

Full path to the file
This is also used as the unique identifier within the project

Type: [String][119]

### parsedName

An object representing meta file parts of a file name

Type: [Object][120]

#### Properties

*   `basename` **[String][119]** The filename + extention (i.e. everything without directory name)
*   `filename` **[String][119]** The file portion of the name (basename without the extension)
*   `ext` **[String][119]** The extension portion of the name (always lower case)
*   `dirName` **[String][119]** The directory path portion of the name

### created

A date representing when the file was created

Type: [Date][121]

### createdFormatted

A human readable, formatted version of "created"

Type: [String][119]

### modified

A date representing when the file was created

Type: [Date][121]

### modifiedFormatted

A human readable, formatted version of "modified"

Type: [String][119]

### accessed

A date representing when the file was last accessed

Type: [Date][121]

### accessedFormatted

A human readable, formatted version of "accessed"

Type: [String][119]

### size

Size, in bytes, of the file

Type: [Number][122]

### sizeFormatted

A human readable, formatted version of the file size

Type: [String][119]

### mime

The associated mime type for the file

Type: [String][119]

### getContents

*   **See**: getProjectFile()

Fetch the raw file contents as a Blob

returns {Blob} The eventual raw file contents as a Blob

### setContents

*   **See**: setProjectFile()

Overwrite the contents of a file with new content

#### Parameters

*   `contents` **(File | [Blob][123] | [FormData][124] | [Object][120] | [Array][125])** The new file contents

Returns **[Promise][126]** A promise which resolves when the operation has completed

### getRefs

*   **See**: parseProjectLibrary()

Fetch the file contents as an array of Reflib refs

Returns **[Promise][126]<[Array][125]\<Ref>>** An eventual array of RefLib references

### setRefs

*   **See**: setProjectLibrary()

Overwrite the contents of a file with a new collection of Reflib refs

#### Parameters

*   `refs` &#x20;
*   `Collection` **[Array][125]\<RefLibRef>** of references for the selected library

Returns **[Promise][126]** A promise which resolves when the operation has completed

## TeraFy

Main Tera-Fy Client (class singleton) to be used in a frontend browser

### settings

Various settings to configure behaviour

Type: [Object][120]

#### Properties

*   `devMode` **[Boolean][127]** Operate in devMode - i.e. force outer refresh when encountering an existing TeraFy instance
*   `mode` **(`"detect"` | `"parent"` | `"child"` | `"popup"`)** How to communicate with TERA. 'parent' assumes that the parent of the current document is TERA, 'child' spawns an iFrame and uses TERA there, 'detect' tries parent and switches to `modeFallback` if communication fails
*   `modeFallback` **[String][119]** Method to use when all method detection fails
*   `modeTimeout` **[Number][122]** How long entities have in 'detect' mode to identify themselves
*   `siteUrl` **[String][119]** The TERA URL to connect to
*   `restrictOrigin` **[String][119]** URL to restrict communications to
*   `List` **[Array][125]<[String][119]>** of sandbox allowables for the embedded if in embed mode
*   `handshakeInterval` **[Number][122]** Interval in milliseconds when sanning for a handshake

### events

Event emitter subscription endpoint

Type: Mitt

### dom

DOMElements for this TeraFy instance

Type: [Object][120]

#### Properties

*   `el` **DOMElement** The main tera-fy div wrapper
*   `iframe` **DOMElement** The internal iFrame element  (if `settings.mode == 'child'`)
*   `popup` **[Window][128]** The popup window context (if `settings.mode == 'popup'`)
*   `stylesheet` **DOMElement** The corresponding stylesheet

### methods

List of function stubs mapped here from the server
This array is forms the reference of `TeraFy.METHOD()` objects to provide locally which will be mapped via `TeraFy.rpc(METHOD, ...args)`

Type: [Array][125]<[String][119]>

### plugins

Loaded plugins via Use()

Type: [Array][125]\<TeraFyPlugin>

### send

Send a message + wait for a response object

#### Parameters

*   `message` **[Object][120]** Message object to send

Returns **[Promise][126]\<any>** A promise which resolves when the operation has completed with the remote reply

### sendRaw

Send raw message content to the server
This function does not return or wait for a reply - use `send()` for that

#### Parameters

*   `message` **[Object][120]** Message object to send

### rpc

Call an RPC function in the server instance

#### Parameters

*   `method` **[String][119]** The method name to call
*   `args` **...any**&#x20;

Returns **[Promise][126]\<any>** The resolved output of the server function

### acceptMessage

Accept an incoming message

#### Parameters

*   `rawMessage` &#x20;
*   `Raw` **[MessageEvent][129]** message event to process

### acceptPostboxes

Listening postboxes, these correspond to outgoing message IDs that expect a response

### createProjectStatePatch

Create + transmit a new project state patch base on the current and previous states
The transmitted patch follows the [JSPatch][130] standard
This function accepts an entire projectState instance, computes the delta and transmits that to the server for merging

#### Parameters

*   `newState` **[Object][120]** The local projectState to accept
*   `oldState` **[Object][120]** The previous projectState to examine against

Returns **[Promise][126]** A promise which will resolve when the operation has completed

### applyProjectStatePatchLocal

Client function which accepts a patch from the server and applies it to local project state
The patch should follow the [JSPatch][130] standard
This function is expected to be sub-classed by a plugin

#### Parameters

*   `patch` **[Array][125]** A JSPatch patch to apply

Returns **[Promise][126]** A promise which will resolve when the operation has completed

### init

Initalize the TERA client singleton
This function can only be called once and will return the existing init() worker Promise if its called againt

#### Parameters

*   `options` **[Object][120]?** Additional options to merge into `settings` via `set`

Returns **[Promise][126]<[TeraFy][24]>** An eventual promise which will resovle with this terafy instance

### detectMode

Populate `settings.mode`
Try to communicate with a parent frame, if none assume we need to fallback to child mode

Returns **[Promise][126]<[String][119]>** A promise which will resolve with the detected mode to use

### injectComms

Find an existing active TERA server OR initalize one

Returns **[Promise][126]** A promise which will resolve when the loading has completed and we have found a parent TERA instance or initiallized a child

### injectStylesheet

Inject a local stylesheet to handle TERA server functionality

### injectMethods

Inject all server methods defined in `methods` as local functions wrapped in the `rpc` function

### debug

Debugging output function
This function will only act if `settings.devMode` is truthy

#### Parameters

*   `msg` **...any**&#x20;
*   `status` **(`"VERBOSE"` | `"INFO"` | `"LOG"` | `"WARN"` | `"ERROR"`)?** Optional prefixing level to mark the message as. 'WARN' and 'ERROR' will always show reguardless of devMode being enabled

### set

Set or merge settings
This function also routes 'special' keys like `devMode` to their internal handlers

#### Parameters

*   `key` **([String][119] | [Object][120])** Either a single setting key to set or an object to merge
*   `value` **any** The value to set if `key` is a string

Returns **[TeraFy][24]** This chainable terafy instance

### setIfDev

*   **See**: set()

Set or merge settings - but only in dev mode and only if the value is not undefined

#### Parameters

*   `key` **([String][119] | [Object][120])** Either a single setting key to set or an object to merge
*   `value` **any** The value to set if `key` is a string

Returns **[TeraFy][24]** This chainable terafy instance

### use

Include a TeraFy client plugin

#### Parameters

*   `mod` &#x20;
*   `options` **[Object][120]?** Additional options to mutate behaviour during construction (pass options to init() to intialize later options)
*   `The` **[Object][120]** module function to include. Invoked as `(teraClient:TeraFy, options:Object)`

Returns **[TeraFy][24]** This chainable terafy instance

### mixin

Internal function used by use() to merge an external declared singleton against this object

#### Parameters

*   `target` **[Object][120]** Initalied class instance to extend
*   `source` **[Object][120]** Initalized source object to extend from

### toggleDevMode

Set or toggle devMode

#### Parameters

*   `devModeEnabled` **([String][119] | [Boolean][127])** Optional boolean to force dev mode (optional, default `'toggle'`)

Returns **[TeraFy][24]** This chainable terafy instance

### toggleFocus

Fit the nested TERA server to a full-screen
This is usually because the server component wants to perform some user activity like calling $prompt

#### Parameters

*   `isFocused` **([String][119] | [Boolean][127])** Whether to fullscreen the embedded component (optional, default `'toggle'`)

### selectProjectFile

Require a user login to TERA
If there is no user OR they are not logged in a prompt is shown to go and do so
This is an pre-requisite step for requireProject()

#### Parameters

*   `options` &#x20;

Returns **[Promise][126]** A promise which will resolve if the there is a user and they are logged in

### getProjectFiles

Fetch the files associated with a given project

#### Parameters

*   `options` **[Object][120]** Options which mutate behaviour

    *   `options.autoRequire` **[Boolean][127]** Run `requireProject()` automatically before continuing (optional, default `true`)
    *   `options.meta` **[Boolean][127]** Pull meta information for each file entity (optional, default `true`)

Returns **[Promise][126]<[Array][125]<[ProjectFile][1]>>** A collection of project files for the given project

### getProjectFile

Fetch a project file

#### Parameters

*   `path` **[String][119]** File path to read

Returns **[Promise][126]<[Blob][123]>** The eventual fetched file as a blob

## handshake

Return basic server information as a form of validation

### Properties

*   `date` **[Date][121]** Server date

Returns **[Promise][126]<[Object][120]>** Basic promise result

## User

User / active session within TERA

### Properties

*   `id` **[String][119]** Unique identifier of the user
*   `email` **[String][119]** The email address of the current user
*   `name` **[String][119]** The provided full name of the user
*   `isSubscribed` **[Boolean][127]** Whether the active user has a TERA subscription

## getUser

Fetch the current session user

Returns **[Promise][126]<[User][73]>** The current logged in user or null if none

## requireUser

Require a user login to TERA
If there is no user OR they are not logged in a prompt is shown to go and do so
This is an pre-requisite step for requireProject()

### Parameters

*   `options` **[Object][120]?** Additional options to mutate behaviour

    *   `options.forceRetry` **[Boolean][127]** Forcabily try to refresh the user state (optional, default `false`)

Returns **[Promise][126]<[User][73]>** The current logged in user or null if none

## Project

Project entry within TERA

## getProject

Get the currently active project, if any

Returns **[Promise][126]<([Project][78] | null)>** The currently active project, if any

## getProjects

Get a list of projects the current session user has access to

Returns **[Promise][126]<[Array][125]<[Project][78]>>** Collection of projects the user has access to

## setActiveProject

Set the currently active project within TERA

### Parameters

*   `project` **([Object][120] | [String][119])** The project to set as active - either the full Project object or its ID

## requireProject

Ask the user to select a project from those available - if one isn't already active
Note that this function will percist in asking the uesr even if they try to cancel

### Parameters

*   `options` **[Object][120]?** Additional options to mutate behaviour

    *   `options.autoSetActiveProject` **[Boolean][127]** After selecting a project set that project as active in TERA (optional, default `true`)
    *   `options.title` **[String][119]** The title of the dialog to display (optional, default `"Select a project to work with"`)
    *   `options.noSelectTitle` **[String][119]** Dialog title when warning the user they need to select something (optional, default `'Select project'`)
    *   `options.noSelectBody` **[String][119]** Dialog body when warning the user they need to select something (optional, default `'A project needs to be selected to continue'`)

Returns **[Promise][126]<[Project][78]>** The active project

## selectProject

Prompt the user to select a project from those available

### Parameters

*   `options` **[Object][120]?** Additional options to mutate behaviour

    *   `options.title` **[String][119]** The title of the dialog to display (optional, default `"Select a project to work with"`)
    *   `options.allowCancel` **[Boolean][127]** Advertise cancelling the operation, the dialog can still be cancelled by closing it (optional, default `true`)
    *   `options.setActive` **[Boolean][127]** Also set the project as active when selected (optional, default `false`)

Returns **[Promise][126]<[Project][78]>** The active project

## getProjectState

Return the current, full snapshot state of the active project

### Parameters

*   `options` **[Object][120]?** Additional options to mutate behaviour

    *   `options.autoRequire` **[Boolean][127]** Run `requireProject()` automatically before continuing (optional, default `true`)
*   `Paths` **[Array][125]<[String][119]>** to subscribe to e.g. \['/users/'],

Returns **[Promise][126]<[Object][120]>** The current project state snapshot

## setProjectState

Set a nested value within the project state
Paths can be any valid Lodash.set() value such as:

    - Dotted notation - e.g. `foo.bar.1.baz`
    - Array path segments e.g. `['foo', 'bar', 1, 'baz']`

### Parameters

*   `path` **([String][119] | [Array][125]<[String][119]>)** The sub-path within the project state to set
*   `value` **any** The value to set
*   `options` **[Object][120]?** Additional options to mutate behaviour

    *   `options.save` **[Boolean][127]** Save the changes to the server immediately, disable to queue up multiple writes (optional, default `true`)

Returns **[Promise][126]** A promise which resolves when the operation has been dispatched to the server

## setProjectStateDefaults

*   **See**: setProjectState()

Set a nested value within the project state - just like `setProjectState()` - but only if no value for that path exists

### Parameters

*   `path` **([String][119] | [Array][125]<[String][119]>)** The sub-path within the project state to set
*   `value` **any** The value to set
*   `options` **[Object][120]?** Additional options to mutate behaviour, see setProjectState() for the full list of supported options

Returns **[Promise][126]<[Boolean][127]>** A promise which resolves to whether any changes were made - True if defaults were applied, false otherwise

## saveProjectState

Force-Save the currently active project state

Returns **[Promise][126]** A promise which resolves when the operation has completed

## replaceProjectState

*   **See**: setProjectState()

Overwrite the entire project state with a new object
You almost never want to use this function directly, see `setProjectState(path, value)` for a nicer wrapper

### Parameters

*   `newState` **[Object][120]** The new state to replace the current state with

Returns **[Promise][126]** A promise which resolves when the operation has completed

## applyProjectStatePatch

Apply a computed `just-diff` patch to the current project state

### Parameters

*   `Patch` **[Object][120]** to apply

Returns **[Promise][126]** A promise which resolves when the operation has completed

## subscribeProjectState

Subscribe to project state changes
This will dispatch an RPC call to the source object `applyProjectStatePatchLocal()` function with the patch
If the above call fails the subscriber is assumed as dead and unsubscribed from the polling list

Returns **[Promise][126]<[Function][131]>** A promise which resolves when a subscription has been created, call the resulting function to unsubscribe

## FileFilters

Data structure for a file filter

### Properties

*   `library` **[Boolean][127]?** Restrict to library files only
*   `filename` **[String][119]?** CSV of @momsfriendlydevco/match expressions to filter the filename by (filenames are the basename sans extension)
*   `basename` **[String][119]?** CSV of @momsfriendlydevco/match expressions to filter the basename by
*   `ext` **[String][119]?** CSV of @momsfriendlydevco/match expressions to filter the file extension by

## selectProjectFile

Prompt the user to select a library to operate on

### Parameters

*   `options` **[Object][120]?** Additional options to mutate behaviour

    *   `options.title` **[String][119]** The title of the dialog to display (optional, default `"Select a file"`)
    *   `options.hint` **([String][119] | [Array][125]<[String][119]>)?** Hints to identify the file to select in array order of preference
    *   `options.save` **[Boolean][127]** Set to truthy if saving a new file, UI will adjust to allowing overwrite OR new file name input (optional, default `false`)
    *   `options.filters` **[FileFilters][99]?** Optional file filters
    *   `options.allowUpload` **[Boolean][127]** Allow uploading new files (optional, default `true`)
    *   `options.allowRefresh` **[Boolean][127]** Allow the user to manually refresh the file list (optional, default `true`)
    *   `options.allowDownloadZip` **[Boolean][127]** Allow the user to download a Zip of all files (optional, default `true`)
    *   `options.allowCancel` **[Boolean][127]** Allow cancelling the operation. Will throw `'CANCEL'` as the promise rejection if acationed (optional, default `true`)
    *   `options.autoRequire` **[Boolean][127]** Run `requireProject()` automatically before continuing (optional, default `true`)
    *   `options.filter` **[FileFilters][99]?** Optional file filters

Returns **[Promise][126]<[ProjectFile][1]>** The eventually selected file

## setProjectFile

Replace a project files contents

### Parameters

*   `path` **[String][119]** File path to write
*   `contents` **(File | [Blob][123] | [FormData][124] | [Object][120] | [Array][125])** The new file contents

Returns **[Promise][126]** A promise which will resolve when the write operation has completed

## selectProjectLibrary

Prompt the user to select a library to operate on and return a array of references in a given format

### Parameters

*   `options` **[Object][120]?** Additional options to mutate behaviour

    *   `options.title` **[String][119]** The title of the dialog to display (optional, default `"Select a citation library"`)
    *   `options.hint` **([String][119] | [Array][125]<[String][119]>)?** Hints to identify the library to select in array order of preference. Generally corresponds to the previous stage - e.g. 'deduped', 'review1', 'review2', 'dedisputed'
    *   `options.allowUpload` **[Boolean][127]** Allow uploading new files (optional, default `true`)
    *   `options.allowRefresh` **[Boolean][127]** Allow the user to manually refresh the file list (optional, default `true`)
    *   `options.allowDownloadZip` **[Boolean][127]** Allow the user to download a Zip of all files (optional, default `true`)
    *   `options.allowCancel` **[Boolean][127]** Allow cancelling the operation. Will throw `'CANCEL'` as the promise rejection if acationed (optional, default `true`)
    *   `options.autoRequire` **[Boolean][127]** Run `requireProject()` automatically before continuing (optional, default `true`)
    *   `options.filters` **[FileFilters][99]?** Optional file filters, defaults to citation library selection only

Returns **[Promise][126]<[Array][125]\<Ref>>** A collection of references from the selected file

## parseProjectLibrary

Convert a project file into a library of citations

### Parameters

*   `path` **[String][119]** File path to read, if omitted the contents of `options` are used to guess at a suitable file
*   `options` **[Object][120]?** Additional options to mutate behaviour

    *   `options.format` **[String][119]** Format for the file. ENUM: 'pojo' (return a parsed JS collection), 'blob' (raw JS Blob object), 'file' (named JS File object) (optional, default `'json'`)
    *   `options.autoRequire` **[Boolean][127]** Run `requireProject()` automatically before continuing (optional, default `true`)
    *   `options.filter` **[Function][131]?** Optional async file filter, called each time as `(File:ProjectFile)`
    *   `options.find` **[Function][131]?** Optional async final stage file filter to reduce all candidates down to one subject file

Returns **([Promise][126]<[Array][125]\<Ref>> | [Promise][126]\<any>)** A collection of references (default bevahiour) or a whatever format was requested

## setProjectLibrary

Save back a citation library from some input

### Parameters

*   `path` **[String][119]?** File path to save back to
*   `Collection` **[Array][125]\<RefLibRef>** of references for the selected library
*   `options` **[Object][120]?** Additional options to mutate behaviour

    *   `options.format` **[String][119]** Input format used. ENUM: 'pojo' (return a parsed JS collection), 'blob' (raw JS Blob object), 'file' (named JS File object) (optional, default `'json'`)
    *   `options.autoRequire` **[Boolean][127]** Run `requireProject()` automatically before continuing (optional, default `true`)
    *   `options.hint` **[String][119]?** Hint to store against the library. Generally corresponds to the current operation being performed - e.g. 'deduped'
    *   `options.overwrite` **[Boolean][127]** Allow existing file upsert (optional, default `true`)
    *   `options.meta` **[Object][120]?** Optional meta data to merge into the file data

Returns **[Promise][126]** A promise which resolves when the save operation has completed

## setProjectLibrary

Save back a projects citation library

### Parameters

*   `Collection` **[Array][125]\<RefLibRef>** of references for the selected library
*   `options` **[Object][120]?** Additional options to mutate behaviour

    *   `options.autoRequire` **[Boolean][127]** Run `requireProject()` automatically before continuing (optional, default `true`)
    *   `options.hint` **[String][119]?** Hint to store against the library. Generally corresponds to the current operation being performed - e.g. 'deduped'

Returns **[Promise][126]** A promise which resolves when the save operation has completed

## uiAlert

Display simple text within TERA

### Parameters

*   `text` **[String][119]** The text to display
*   `options` **[Object][120]?** Additional options to mutate behaviour

    *   `options.title` **[String][119]** The title of the alert box (optional, default `'TERA'`)
    *   `options.isHtml` **[Boolean][127]** If falsy the text is rendered as plain-text otherwise it will be assumed as HTML content (optional, default `false`)

Returns **[Promise][126]** A promise which resolves when the alert has been dismissed

## uiSplat

Display HTML content full-screen within TERA
This function is ideally called within a requestFocus() wrapper

### Parameters

*   `content` **(DOMElement | [String][119] | `false`)** Either a prepared DOM element or string to compile, set to falsy to remove existing content
*   `options` **[Object][120]?** Additional options to mutate behaviour

    *   `options.logo` **([Boolean][127] | [String][119])** Add a logo to the output, if boolean true the Tera-tools logo is used otherwise specify a path or URL (optional, default `false`)

## uiWindow

Open a popup window containing a new site

### Parameters

*   `url` **[String][119]** The URL to open
*   `options` **[Object][120]?** Additional options to mutate behaviour

    *   `options.width` **[Number][122]** The desired width of the window (optional, default `500`)
    *   `options.height` **[Number][122]** The desired height of the window (optional, default `600`)
    *   `options.center` **[Boolean][127]** Attempt to center the window on the screen (optional, default `true`)
    *   `options.permissions` **[Object][120]?** Additional permissions to set on opening, defaults to a suitable set of permission for popups (see code)

Returns **WindowProxy** The opened window object (if `noopener` is not set in permissions)

[1]: #projectfile

[2]: #tera

[3]: #parameters

[4]: #id

[5]: #name

[6]: #path

[7]: #parsedname

[8]: #properties

[9]: #created

[10]: #createdformatted

[11]: #modified

[12]: #modifiedformatted

[13]: #accessed

[14]: #accessedformatted

[15]: #size

[16]: #sizeformatted

[17]: #mime

[18]: #getcontents

[19]: #setcontents

[20]: #parameters-1

[21]: #getrefs

[22]: #setrefs

[23]: #parameters-2

[24]: #terafy

[25]: #settings

[26]: #properties-1

[27]: #events

[28]: #dom

[29]: #properties-2

[30]: #methods

[31]: #plugins

[32]: #send

[33]: #parameters-3

[34]: #sendraw

[35]: #parameters-4

[36]: #rpc

[37]: #parameters-5

[38]: #acceptmessage

[39]: #parameters-6

[40]: #acceptpostboxes

[41]: #createprojectstatepatch

[42]: #parameters-7

[43]: #applyprojectstatepatchlocal

[44]: #parameters-8

[45]: #init

[46]: #parameters-9

[47]: #detectmode

[48]: #injectcomms

[49]: #injectstylesheet

[50]: #injectmethods

[51]: #debug

[52]: #parameters-10

[53]: #set

[54]: #parameters-11

[55]: #setifdev

[56]: #parameters-12

[57]: #use

[58]: #parameters-13

[59]: #mixin

[60]: #parameters-14

[61]: #toggledevmode

[62]: #parameters-15

[63]: #togglefocus

[64]: #parameters-16

[65]: #selectprojectfile

[66]: #parameters-17

[67]: #getprojectfiles

[68]: #parameters-18

[69]: #getprojectfile

[70]: #parameters-19

[71]: #handshake

[72]: #properties-3

[73]: #user

[74]: #properties-4

[75]: #getuser

[76]: #requireuser

[77]: #parameters-20

[78]: #project

[79]: #getproject

[80]: #getprojects

[81]: #setactiveproject

[82]: #parameters-21

[83]: #requireproject

[84]: #parameters-22

[85]: #selectproject

[86]: #parameters-23

[87]: #getprojectstate

[88]: #parameters-24

[89]: #setprojectstate

[90]: #parameters-25

[91]: #setprojectstatedefaults

[92]: #parameters-26

[93]: #saveprojectstate

[94]: #replaceprojectstate

[95]: #parameters-27

[96]: #applyprojectstatepatch

[97]: #parameters-28

[98]: #subscribeprojectstate

[99]: #filefilters

[100]: #properties-5

[101]: #selectprojectfile-1

[102]: #parameters-29

[103]: #setprojectfile

[104]: #parameters-30

[105]: #selectprojectlibrary

[106]: #parameters-31

[107]: #parseprojectlibrary

[108]: #parameters-32

[109]: #setprojectlibrary

[110]: #parameters-33

[111]: #setprojectlibrary-1

[112]: #parameters-34

[113]: #uialert

[114]: #parameters-35

[115]: #uisplat

[116]: #parameters-36

[117]: #uiwindow

[118]: #parameters-37

[119]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String

[120]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object

[121]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Date

[122]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number

[123]: https://developer.mozilla.org/docs/Web/API/Blob

[124]: https://developer.mozilla.org/docs/Web/API/FormData

[125]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array

[126]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise

[127]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean

[128]: https://developer.mozilla.org/docs/Web/API/Window

[129]: https://developer.mozilla.org/docs/Web/API/MessageEvent

[130]: http://jsonpatch.com

[131]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function
